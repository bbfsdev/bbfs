#!/usr/bin/env ruby

# Runs backup server. This server monitors a set of directories (blobs/patterns).
# The files in those directories are indexed (calculating their SHA1).
# A remote server copies new/changed files in the backup server. The backup server
# index those new files too and send the content data (their SHA1 to the original server).

# NOTE this file mainly is a copy of content_server

begin
  require 'yaml'
  require 'params'
  require 'run_in_background'
  require 'content_server'
rescue LoadError
  require 'rubygems'
  require 'yaml'
  require 'params'
  require 'run_in_background'
  require 'content_server'
end
include BBFS

Params.init ARGV
Log.init

RunInBackground.run { ContentServer.run_backup_server }
